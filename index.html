<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mr Kendall's SQL Academy</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="apple-touch-icon" href="favicon.svg">
    
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"></script>
</head>
<body class="dark-theme">
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-text">
                    <h1>Mr Kendall's SQL Academy</h1>
                
                </div>
                <div class="header-controls">
                    <div class="theme-toggle">
                        <button id="themeToggle" class="theme-toggle-btn" aria-label="Toggle dark/light mode">
                            <span class="theme-icon">☀️</span>
                        </button>
                    </div>
                    <div class="header-icon">
                        <a href="https://www.korovatron.co.uk/" target="_blank" rel="noopener noreferrer" aria-label="Visit Korovatron website">
                            <img src="korovatronIconTrans.png" alt="Korovatron Icon" class="korovatron-icon">
                        </a>
                    </div>
                </div>
            </div>
        </header>

        <div class="main-content">
            <div class="left-panel">
                <div class="database-info">
                    <div class="schema-header">
                        <h3>Hero Database Schema</h3>
                        <button class="schema-toggle-btn" id="schemaToggle" aria-label="Toggle schema visibility">
                            <span class="schema-toggle-icon">▼</span>
                        </button>
                    </div>
                    <div class="schema-container" id="schemaContainer">
                        <div class="table-info">
                            <h4>Heroes</h4>
                            <ul>
                                <li>HeroID (Primary Key)</li>
                                <li>HeroName</li>
                                <li>RealName</li>
                                <li>City</li>
                                <li>Universe</li>
                                <li>PowerLevel</li>
                                <li>FirstAppearance (Date)</li>
                            </ul>
                        </div>
                        <div class="table-info">
                            <h4>Powers</h4>
                            <ul>
                                <li>PowerID (Primary Key)</li>
                                <li>PowerName</li>
                                <li>PowerType</li>
                                <li>EnergyRequired</li>
                                <li>DangerLevel</li>
                                <li>CreationDate (Date)</li>
                            </ul>
                        </div>
                        <div class="table-info">
                            <h4>Missions</h4>
                            <ul>
                                <li>MissionID (Primary Key)</li>
                                <li>HeroID (Foreign Key)</li>
                                <li>VillainID (Foreign Key)</li>
                                <li>MissionDate (Date)</li>
                                <li>Difficulty</li>
                                <li>Status</li>
                            </ul>
                        </div>
                        <div class="table-info">
                            <h4>HeroPowers</h4>
                            <ul>
                                <li>HeroID (Foreign Key)</li>
                                <li>PowerID (Foreign Key)</li>
                                <li>ProficiencyLevel</li>
                                <li>YearsTraining</li>
                            </ul>
                        </div>
                        <div class="table-info">
                            <h4>Villains</h4>
                            <ul>
                                <li>VillainID (Primary Key)</li>
                                <li>VillainName</li>
                                <li>RealName</li>
                                <li>City</li>
                                <li>ThreatLevel</li>
                                <li>LastSeen (Date)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="example-queries">
                    <h3>Exercises</h3>
                    <div class="exercise-sections">
                        <div class="section-group">
                            <h4 class="section-toggle collapsed" data-section="section1">
                                <span class="toggle-icon">▼</span> Module 1: SELECT (6 exercises)
                            </h4>
                            <div class="examples section-content collapsed" id="section1">
                                <button class="exercise-btn" data-exercise="1" data-title="Exercise 1: Basic SELECT" data-description="Select all columns from the Heroes table to see all superheroes in the database.">1. View All Heroes</button>
                                <button class="exercise-btn" data-exercise="2" data-title="Exercise 2: Filtering by Text" data-description="Select all heroes where the Universe is exactly 'Marvel'. Show all columns.">2. Marvel Heroes Only</button>
                                <button class="exercise-btn" data-exercise="3" data-title="Exercise 3: Filtering by Number Range" data-description="Select the HeroName and PowerLevel for all heroes where PowerLevel is greater than 90.">3. Most Powerful Heroes</button>
                                <button class="exercise-btn" data-exercise="4" data-title="Exercise 4: Ordering Results" data-description="Select HeroName and City from Heroes table, ordered alphabetically by HeroName (A to Z).">4. Heroes Alphabetically</button>
                                <button class="exercise-btn" data-exercise="5" data-title="Exercise 5: Date Range Query" data-description="Select HeroName and FirstAppearance for heroes who first appeared before 1950-01-01. These are the Golden Age heroes.">5. Golden Age Heroes</button>
                                <button class="exercise-btn" data-exercise="6" data-title="Exercise 6: Descending Order" data-description="Select VillainName and ThreatLevel from Villains table, ordered by ThreatLevel from highest to lowest (descending).">6. Most Dangerous Villains</button>
                            </div>
                        </div>
                        
                        <div class="section-group">
                            <h4 class="section-toggle collapsed" data-section="section2">
                                <span class="toggle-icon">▼</span> Module 2: JOIN tables (4 exercises)
                            </h4>
                            <div class="examples section-content collapsed" id="section2">
                                <button class="exercise-btn" data-exercise="7" data-title="Exercise 7: Basic Two-Table Join" data-description="Show each hero's name along with their mission dates. Select HeroName from Heroes and MissionDate from Missions. Use WHERE to join Heroes.HeroID = Missions.HeroID.">7. Heroes and Mission Dates</button>
                                <button class="exercise-btn" data-exercise="8" data-title="Exercise 8: Filtered Two-Table Join" data-description="Show hero names and villain names for completed missions only. Select HeroName from Heroes and VillainName from Villains, joining through Missions where Status = 'Completed'.">8. Successful Hero-Villain Battles</button>
                                <button class="exercise-btn" data-exercise="9" data-title="Exercise 9: Hero Powers" data-description="Show each hero's name and their power names. Select HeroName from Heroes and PowerName from Powers, using the HeroPowers junction table to connect them.">9. Heroes and Their Powers</button>
                                <button class="exercise-btn" data-exercise="10" data-title="Exercise 10: Recent Missions" data-description="Show hero names and mission dates for missions that occurred after 2024-03-20. Order by mission date (newest first).">10. Recent Hero Activity</button>
                            </div>
                        </div>

                        <div class="section-group">
                            <h4 class="section-toggle collapsed" data-section="section3">
                                <span class="toggle-icon">▼</span> Module 3: JOIN multiple tables (5 exercises)
                            </h4>
                            <div class="examples section-content collapsed" id="section3">
                                <button class="exercise-btn" data-exercise="11" data-title="Exercise 11: Complete Mission Details" data-description="Show HeroName, VillainName, and MissionDate for all completed missions. You'll need to join Heroes, Villains, and Missions tables.">11. Full Mission Reports</button>
                                <button class="exercise-btn" data-exercise="12" data-title="Exercise 12: Power Analysis" data-description="Show HeroName, PowerName, and ProficiencyLevel for heroes with proficiency above 90. Join Heroes, Powers, and HeroPowers tables.">12. Master-Level Powers</button>
                                <button class="exercise-btn" data-exercise="13" data-title="Exercise 13: Dangerous Power Users" data-description="Show HeroName, PowerName, and DangerLevel for powers with DangerLevel greater than 7. Order by DangerLevel descending.">13. Most Dangerous Abilities</button>
                                <button class="exercise-btn" data-exercise="14" data-title="Exercise 14: Mission Difficulty Analysis" data-description="Show HeroName, VillainName, and Difficulty for all 'Hard' or 'Extreme' difficulty missions, ordered by hero name alphabetically.">14. Challenging Missions</button>
                                <button class="exercise-btn" data-exercise="15" data-title="Exercise 15: Advanced Hero Analysis" data-description="Show HeroName, PowerName, and FirstAppearance for Marvel heroes who have Reality-type powers. Order by PowerName alphabetically.">15. Marvel Reality Masters</button>
                            </div>
                        </div>

                        <div class="section-group">
                            <h4 class="section-toggle collapsed" data-section="section4">
                                <span class="toggle-icon">▼</span> Module 4: INSERT INTO (5 exercises)
                            </h4>
                            <div class="examples section-content collapsed" id="section4">
                                <button class="exercise-btn" data-exercise="16" data-title="Exercise 16: Add New Hero" data-description="Insert a new hero named 'Deadpool' with real name 'Wade Wilson', city 'New York', universe 'Marvel', power level 75, and first appearance '1991-02-01'.">16. Create New Hero</button>
                                <button class="exercise-btn" data-exercise="17" data-title="Exercise 17: Add New Power" data-description="Insert a new power called 'Regeneration' with power type 'Physical', energy required 20, danger level 3, and creation date '1991-02-01'.">17. Create New Power</button>
                                <button class="exercise-btn" data-exercise="18" data-title="Exercise 18: Add New Villain" data-description="Insert a new villain named 'Venom' with real name 'Eddie Brock', city 'New York', threat level 7, and last seen '2024-05-01'.">18. Create New Villain</button>
                                <button class="exercise-btn" data-exercise="19" data-title="Exercise 19: Assign Hero Power" data-description="Give Deadpool (HeroID 11) the Regeneration power (PowerID 11) with proficiency level 95 and 10 years of training. Insert into HeroPowers table.">19. Assign Power to Hero</button>
                                <button class="exercise-btn" data-exercise="20" data-title="Exercise 20: Create Mission" data-description="Create a new mission with ID 1011 where Deadpool (HeroID 11) fights Venom (VillainID 211) on '2024-05-15' with 'Medium' difficulty and 'In Progress' status.">20. Create New Mission</button>
                            </div>
                        </div>

                        <div class="section-group">
                            <h4 class="section-toggle collapsed" data-section="section5">
                                <span class="toggle-icon">▼</span> Module 5: UPDATE (5 exercises)
                            </h4>
                            <div class="examples section-content collapsed" id="section5">
                                <button class="exercise-btn" data-exercise="21" data-title="Exercise 21: Power Level Boost" data-description="Update Spider-Man's power level to 90. Use UPDATE statement with WHERE clause to target the specific hero by name.">21. Boost Hero Power</button>
                                <button class="exercise-btn" data-exercise="22" data-title="Exercise 22: Mission Status Update" data-description="Update the mission with ID 1004 to change its status from 'In Progress' to 'Completed'.">22. Complete Mission</button>
                                <button class="exercise-btn" data-exercise="23" data-title="Exercise 23: Villain Activity Update" data-description="Update the Joker's last seen date to '2024-10-01' to reflect recent criminal activity.">23. Update Villain Activity</button>
                                <button class="exercise-btn" data-exercise="24" data-title="Exercise 24: Multiple Field Update" data-description="Update Iron Man to increase his power level to 95 AND change his city to 'Los Angeles'. Use a single UPDATE statement.">24. Multiple Field Changes</button>
                                <button class="exercise-btn" data-exercise="25" data-title="Exercise 25: Conditional Power Update" data-description="Update all powers with danger level greater than 8 to increase their energy required by 10. This affects multiple records with one UPDATE.">25. Bulk Power Adjustment</button>
                            </div>
                        </div>

                        <div class="section-group">
                            <h4 class="section-toggle collapsed" data-section="section6">
                                <span class="toggle-icon">▼</span> Module 6: DELETE (5 exercises)
                            </h4>
                            <div class="examples section-content collapsed" id="section6">
                                <button class="exercise-btn" data-exercise="26" data-title="Exercise 26: Remove Failed Mission" data-description="Delete the mission with status 'Failed' from the Missions table. Use WHERE clause to target only failed missions.">26. Clean Up Failed Mission</button>
                                <button class="exercise-btn" data-exercise="27" data-title="Exercise 27: Remove Low-Threat Villain" data-description="Delete the villain 'Taskmaster' from the Villains table. Target by villain name.">27. Remove Minor Villain</button>
                                <button class="exercise-btn" data-exercise="28" data-title="Exercise 28: Remove Hero Power" data-description="Remove the power relationship between Iron Man (HeroID 4) and Flight (PowerID 3) from the HeroPowers table. Use both HeroID and PowerID in WHERE clause.">28. Remove Power Assignment</button>
                                <button class="exercise-btn" data-exercise="29" data-title="Exercise 29: Delete Old Missions" data-description="Delete all missions that occurred before '2024-03-20' from the Missions table. Use date comparison in WHERE clause.">29. Archive Old Missions</button>
                                <button class="exercise-btn" data-exercise="30" data-title="Exercise 30: Remove Low-Power Heroes" data-description="Delete all heroes with power level less than 85 from the Heroes table. This will affect multiple records - be careful with your WHERE clause!">30. Remove Weak Heroes</button>
                            </div>
                        </div>

                        <div class="section-group">
                            <h4 class="section-toggle collapsed" data-section="section7">
                                <span class="toggle-icon">▼</span> Module 7: CREATE TABLE (9 exercises)
                            </h4>
                            <div class="examples section-content collapsed" id="section7">
                                <button class="exercise-btn" data-exercise="31" data-title="Exercise 31: Create Teams Table" data-description="Create a new table called 'Teams' with columns: TeamID (INTEGER PRIMARY KEY), TeamName (TEXT NOT NULL), LeaderID (INTEGER), and City (TEXT).">31. Define Teams Table</button>
                                <button class="exercise-btn" data-exercise="32" data-title="Exercise 32: Populate Teams Table" data-description="Insert three teams into the Teams table: (1, 'Avengers', 7, 'New York'), (2, 'Justice League', 7, 'Washington DC'), and (3, 'X-Men', 10, 'New York').">32. Add Team Records</button>
                                <button class="exercise-btn" data-exercise="33" data-title="Exercise 33: Add More Teams" data-description="Insert two more teams: (4, 'Fantastic Four', 4, 'New York') and (5, 'Teen Titans', 3, 'Jump City').">33. Expand Team Roster</button>
                                <button class="exercise-btn" data-exercise="34" data-title="Exercise 34: Correct Team Leader" data-description="There's an error! Justice League should be led by Superman (HeroID 7), but Avengers should be led by Iron Man (HeroID 4). Update the Avengers record to fix this mistake.">34. Fix Leadership Error</button>
                                <button class="exercise-btn" data-exercise="35" data-title="Exercise 35: Update Team Location" data-description="The Teen Titans have moved! Update their city from 'Jump City' to 'San Francisco' to reflect their new headquarters location.">35. Relocate Team</button>
                                <button class="exercise-btn" data-exercise="36" data-title="Exercise 36: Add Column to Teams" data-description="Add a new column called 'Founded' with data type TEXT to the Teams table to track when each team was established.">36. Add Founded Date</button>
                                <button class="exercise-btn" data-exercise="37" data-title="Exercise 37: Update Founded Dates" data-description="Update the Teams table to set founding dates: Avengers = '1963-09-01', Justice League = '1960-03-01', X-Men = '1963-09-01', Fantastic Four = '1961-11-01', Teen Titans = '1964-07-01'.">37. Set Team History</button>
                                <button class="exercise-btn" data-exercise="38" data-title="Exercise 38: Remove Disbanded Team" data-description="Unfortunately, the Fantastic Four has disbanded. Delete their record from the Teams table.">38. Remove Team</button>
                                <button class="exercise-btn" data-exercise="39" data-title="Exercise 39: Drop Teams Table" data-description="Clean up the database by removing the entire Teams table using DROP TABLE statement.">39. Clean Up Tables</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="right-panel">
                <div class="exercise-display" id="exerciseDisplay" style="display: none;">
                    <h3 id="exerciseTitle">Exercise Title</h3>
                    <p id="exerciseDescription">Exercise description will appear here when you select an exercise from the left.</p>
                </div>
                
                <div class="sql-editor">
                    <h3>SQL Query Editor</h3>
                    <textarea id="sqlInput" placeholder="Enter your SQL query here...
Example: SELECT * FROM Heroes WHERE PowerLevel > 90;"></textarea>
                    <div class="editor-controls">
                        <button id="executeBtn">Execute Query</button>
                        <button id="clearBtn">Clear</button>
                        <button id="resetDbBtn">Reset Database</button>
                    </div>
                </div>

                <div class="results">
                    <h3>Query Results</h3>
                    <div id="loading" class="loading" style="display: none;">
                        <div class="spinner"></div>
                        <span>Loading database...</span>
                    </div>
                    <div id="results"></div>
                </div>
            </div>
        </div>

        <footer>
            <p>Powered by SQL.js - SQLite compiled to WebAssembly for client-side use</p>
        </footer>
    </div>

    <script src="database.js"></script>
    <script src="app.js"></script>
</body>
</html>